<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>427 Games</title>
<style>
html,body{margin:0;height:100%;overflow:hidden;background:#000}
canvas#glcanvas{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:40vmin;height:20vmin;}
</style>
</head>
<body>
<canvas id="glcanvas"></canvas>
<script type="module">
const canvas=document.getElementById('glcanvas');
const gl=canvas.getContext('webgl2');
if(!gl)throw new Error('WebGL-2 required');
function resize(){const dpr=window.devicePixelRatio||1;canvas.width=canvas.clientWidth*dpr;canvas.height=canvas.clientHeight*dpr;gl.viewport(0,0,canvas.width,canvas.height);}new ResizeObserver(resize).observe(canvas);resize();
const vs=`#version 300 es
precision highp float;
in vec2 aPos;void main(){gl_Position=vec4(aPos,0.0,1.0);} `;
const fs=`#version 300 es
precision highp float;
uniform vec2 iResolution;uniform float iTime;out vec4 fragColor;
const uint r[21]=uint[21](0u,0u,0x111075c1u,0x11113119u,0x22226d4cu,0x2222319bu,0x33336d4du,0x33343199u,0x555565ceu,0x55553519u,0x5555e45cu,0x55553119u,0x5555655du,0x55552119u,0x55553119u,0x5555654cu,0x55553199u,0x555565ccu,0x55553919u,0u,0u);
const vec3 l[6]=vec3[6](vec3(0.0),vec3(1.0,0.0,0.37),vec3(1.0,0.47,0.0),vec3(1.0,0.8,0.0),vec3(0.64,0.0,1.0),vec3(0.33,0.0,1.0));
void mainImage(out vec4 O,in vec2 U){vec2 u=U/iResolution.y*15.0-vec2(3.0,6.0);vec2 t=cos(iTime*2.0+u.xx*0.2)*0.1+0.5;vec2 s=step(fract(u),t);uint a,b,c;uvec4 i=uvec4(u,u-t);uvec4 x=uvec4(a=r[i.x],b=r[++i.x],b,b);uvec4 y=uvec4(a,c=r[++i.z],b,c);uvec4 w=i.yyyy;uvec4 z=uvec4(i.w,--w.y,i.w,i.y);vec3 k=l[(b>>(w.x*4u)+16u)&15u];uvec4 mask=(x>>(w*4u))|(y>>(z*4u));vec4 stroke=vec4(mask&uvec4(1u,2u,4u,8u));O=(vec4(k,1.0)-dot(stroke,s.xyxy))*vec4(4.0+t.x>u.y&&u.y>0.0);}void main(){vec4 col;mainImage(col,gl_FragCoord.xy);fragColor=col;}`;
function compile(t,s){const sh=gl.createShader(t);gl.shaderSource(sh,s);gl.compileShader(sh);if(!gl.getShaderParameter(sh,gl.COMPILE_STATUS))throw new Error(gl.getShaderInfoLog(sh));return sh;}
const prog=gl.createProgram();gl.attachShader(prog,compile(gl.VERTEX_SHADER,vs));gl.attachShader(prog,compile(gl.FRAGMENT_SHADER,fs));gl.linkProgram(prog);if(!gl.getProgramParameter(prog,gl.LINK_STATUS))throw new Error(gl.getProgramInfoLog(prog));gl.useProgram(prog);
const quad=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,quad);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),gl.STATIC_DRAW);const loc=gl.getAttribLocation(prog,'aPos');gl.enableVertexAttribArray(loc);gl.vertexAttribPointer(loc,2,gl.FLOAT,false,0,0);
const uRes=gl.getUniformLocation(prog,'iResolution'),uTim=gl.getUniformLocation(prog,'iTime');let t0=performance.now();function loop(t){t=(t-t0)*0.001;gl.uniform2f(uRes,canvas.width,canvas.height);gl.uniform1f(uTim,t);gl.drawArrays(gl.TRIANGLES,0,6);requestAnimationFrame(loop);}requestAnimationFrame(loop);
</script>
</body>
</html>
